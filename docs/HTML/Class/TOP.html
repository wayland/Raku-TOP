<!doctype html>
<html lang="en">
<head>
    <title></title>
    <meta charset="UTF-8"/>
    <style>hr,
img {
    box-sizing: content-box
}
body::after,
body::before,
hr::after,
hr::before {
    display: table;
    content: &quot;&quot;
}
a,
a:not([href]) {
    text-decoration: none
}

hr,
svg:not(:root) {
    overflow: hidden
}

img,
table tr {
    background-color: #fff
}

pre,
table {
    overflow: auto
}

dl,
dl dt,
hr,
pre code,
pre&gt;code,
td,
th {
    padding: 0
}

input,
pre code {
    overflow: visible
}

pre,
pre code {
    word-wrap: normal
}

body {
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
    color: #333;
    font-family: &quot;Segoe UI&quot;, Roboto, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;
    font-size: 16px;
    line-height: 1.5;
    word-wrap: break-word;
    width: 820px;
    margin: 2em auto;
}

a {
    background-color: transparent;
    -webkit-text-decoration-skip: objects;
    color: #4078c0
}

a:active,
a:hover {
    outline-width: 0;
    text-decoration: underline
}

h1 {
    margin: .67em 0
}

img {
    border-style: none;
    max-width: 100%
}

h1,
h2 {
    padding-bottom: .3em;
    border-bottom: 1px solid #eee
}

input {
    font: inherit;
    margin: 0;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit
}

* {
    box-sizing: border-box
}

strong {
    font-weight: 600
}

body::after,
hr::after {
    clear: both
}

table {
    border-spacing: 0;
    border-collapse: collapse;
    display: block;
    width: 100%
}

blockquote {
    margin: 0;
    padding: 0 1em;
    color: #777;
    border-left: .25em solid #ddd
}

ol ol,
ul ol {
    list-style-type: lower-roman
}

ol ol ol,
ol ul ol,
ul ol ol,
ul ul ol {
    list-style-type: lower-alpha
}

dd {
    margin-left: 0
}

code {
    font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace
}

pre {
    font: 12px Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace
}

input {
    -webkit-font-feature-settings: &quot;liga&quot; 0;
    font-feature-settings: &quot;liga&quot; 0
}

body&gt;:first-child {
    margin-top: 0!important
}

body&gt;:last-child {
    margin-bottom: 0!important
}

a:not([href]) {
    color: inherit
}

blockquote,
dl,
ol,
p,
pre,
table,
ul {
    margin-top: 0;
    margin-bottom: 16px
}

hr {
    background: #e7e7e7;
    height: .25em;
    margin: 24px 0;
    border: 0
}

blockquote&gt;:first-child {
    margin-top: 0
}

blockquote&gt;:last-child {
    margin-bottom: 0
}

h1,
h2,
h3,
h4,
h5,
h6 {
    margin-top: 24px;
    margin-bottom: 16px;
    font-weight: 600;
    line-height: 1.25
}

dl dt,
table th {
    font-weight: 700
}

h1 code,
h1 tt,
h2 code,
h2 tt,
h3 code,
h3 tt,
h4 code,
h4 tt,
h5 code,
h5 tt,
h6 code,
h6 tt {
    font-size: inherit
}

h1 {
    font-size: 2em
}

h2 {
    font-size: 1.5em
}

h3 {
    font-size: 1.25em
}

h4 {
    font-size: 1em
}

h5 {
    font-size: .875em
}

h6 {
    font-size: .85em;
    color: #777
}

ol,
ul {
    padding-left: 2em
}

ol ol,
ol ul,
ul ol,
ul ul {
    margin-top: 0;
    margin-bottom: 0
}

li&gt;p {
    margin-top: 16px
}

li+li {
    margin-top: .25em
}

dl dt {
    margin-top: 16px;
    font-size: 1em;
    font-style: italic
}

dl dd {
    padding: 0 16px;
    margin-bottom: 16px
}

table td,
table th {
    padding: 6px 13px;
    border: 1px solid #ddd
}

table tr {
    border-top: 1px solid #ccc
}

table tr:nth-child(2n) {
    background-color: #f8f8f8
}

code {
    padding: .2em 0;
    margin: 0;
    font-size: 85%;
    background-color: rgba(0, 0, 0, .04);
    border-radius: 3px
}

code::after,
code::before {
    letter-spacing: -.2em;
    content: &quot;\00a0&quot;
}

pre&gt;code {
    margin: 0;
    font-size: 100%;
    word-break: normal;
    white-space: pre;
    background: 0 0;
    border: 0
}

pre {
    padding: 16px;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border-radius: 3px
}

pre code {
    display: inline;
    max-width: auto;
    margin: 0;
    line-height: inherit;
    background-color: transparent;
    border: 0
}

pre code::after,
pre code::before {
    content: normal
}

kbd {
    display: inline-block;
    padding: 3px 5px;
    font: 11px Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;
    line-height: 10px;
    color: #555;
    vertical-align: middle;
    background-color: #fcfcfc;
    border: 1px solid #ccc;
    border-bottom-color: #bbb;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 #bbb
}

hr {
    border-bottom-color: #eee
}
</style>

    
</head>

<body class="pod">
    <div id="___top"></div>
    <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
<tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#TOP::Core">TOP::Core</a></td></tr>
     <tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="#Tuple">Tuple</a></td></tr>
    <tr class="toc-level-1"><td class="toc-number">3</td><td class="toc-text"><a href="#Field">Field</a></td></tr>
    <tr class="toc-level-2"><td class="toc-number">3.1</td><td class="toc-text"><a href="#Attributes">Attributes</a></td></tr>
  <tr class="toc-level-2"><td class="toc-number">3.2</td><td class="toc-text"><a href="#Methods">Methods</a></td></tr>
 <tr class="toc-level-3"><td class="toc-number">3.2.1</td><td class="toc-text"><a href="#.new">.new</a></td></tr>
    <tr class="toc-level-3"><td class="toc-number">3.2.2</td><td class="toc-text"><a href="#type">type</a></td></tr>
               <tr class="toc-level-1"><td class="toc-number">4</td><td class="toc-text"><a href="#Relation">Relation</a></td></tr>
   <tr class="toc-level-1"><td class="toc-number">5</td><td class="toc-text"><a href="#Table">Table</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">5.1</td><td class="toc-text"><a href="#Attributes">Attributes</a></td></tr>
      <tr class="toc-level-2"><td class="toc-number">5.2</td><td class="toc-text"><a href="#Methods">Methods</a></td></tr>
 <tr class="toc-level-3"><td class="toc-number">5.2.1</td><td class="toc-text"><a href="#.new_Parameters_to_.new_include:">.new Parameters to .new include:</a></td></tr>
         <tr class="toc-level-1"><td class="toc-number">6</td><td class="toc-text"><a href="#Database">Database</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">6.1</td><td class="toc-text"><a href="#Attributes">Attributes</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">6.2</td><td class="toc-text"><a href="#Methods">Methods</a></td></tr>
 <tr class="toc-level-3"><td class="toc-number">6.2.1</td><td class="toc-text"><a href="#.new()_Parameters_to_.new()_are:">.new() Parameters to .new() are:</a></td></tr>
   <tr class="toc-level-3"><td class="toc-number">6.2.2</td><td class="toc-text"><a href="#method_useTable">method useTable</a></td></tr>
                          
</table>
</nav>


    <div class="pod-body">
    <h1 id="TOP::Core"><a class="u" href="#___top" title="go to top of document">TOP::Core</a></h1>
<pre class="pod-block-code">role	TOP::Core {}

</pre>
<p>This is the common code that&#39;s shared across all TOP objects; this is intended to be a role on all TOP classes.</p>
<h1 id="Tuple"><a class="u" href="#___top" title="go to top of document">Tuple</a></h1>
<pre class="pod-block-code">class	Tuple is Hash::Ordered {}</pre>
<p>This is the Tuple class from which all other Tuple classes descend.</p>
<p>It&#39;s descended from Hash::Ordered because the columns may well need to be ordered. In the case of SQL, it&#39;s less important, but in the case of a spreadsheet, it&#39;s important.</p>
<h1 id="Field"><a class="u" href="#___top" title="go to top of document">Field</a></h1>
<pre class="pod-block-code">class Field does Positional ...</pre>
<p>This class represents a field/column in a Relation. It can be read positionally, but should also know and store other relevant attributes about the field. Fields should generally have a name; in an SQL-like setting, it&#39;s the actual field name, and in a spreadsheet-like setting, it should generally be the column label (A, B, etc), unless specified otherwise.</p>
<p>The elements in the Field can be accessed positionally. So $field[0] returns the value for this field for the zeroth record/row.</p>
<h2 id="Attributes"><a class="u" href="#___top" title="go to top of document">Attributes</a></h2>
<dl>
<dt>Str $.name</dt>
<dd><p>The Field name.</p>
</dd>

</dl>
<h2 id="Methods"><a class="u" href="#___top" title="go to top of document">Methods</a></h2>
<h3 id=".new"><a class="u" href="#___top" title="go to top of document">.new</a></h3>
<p>Parameters to .new are:</p>
<dl>
<dt>Relation :$relation</dt>
<dd><p>The Relation which contains the field. Required.</p>
</dd>

</dl>
<dl>
<dt>Any:U :$type</dt>
<dd><p>The Field type. Optional. Just pass in the actual type (eg. Str -- no quotes needed). See also .type method, below.</p>
</dd>

</dl>
<h3 id="type"><a class="u" href="#___top" title="go to top of document">type</a></h3>
<pre class="pod-block-code">method 	type(Any:U $value = Nil) {</pre>
<p>Parameters:</p>
<ul><li><p>Any:U $value = Nil</p>
</li>
</ul>
<p>This method will:</p>
<ul><li><p>Lets you store a type (like the $type parameter to .new)</p>
</li>
<li><p>Attempts to deduce a type from the existing data</p>
</li>
</ul>
<p>Here&#39;s how it works:</p>
<ul><li><p>If a type is passed in, it will be set as the type of the Field</p>
</li>
<li><p>If the type (new or existing) is not Nil, it will be returned</p>
</li>
<li><p>If the type is Nil, but there are elements in the Field, it will attempt to deduce the correct type</p>
</li>
<li><p>Otherwise, it returns Nil</p>
</li>
</ul>
<p>The process for deducing types is to call <code>(list).are()</code> on the list of values that are present in the field.</p>
<h1 id="Relation"><a class="u" href="#___top" title="go to top of document">Relation</a></h1>
<pre class="pod-block-code">role	Relation is SetHash does TOP::Core does Associative does Positional {}</pre>
<p>The Relation class&#39; main function at this point is to be composed int the Table class; at some point there will also be a View class, at which point it will become more relevant.</p>
<h1 id="Table"><a class="u" href="#___top" title="go to top of document">Table</a></h1>
<pre class="pod-block-code">class	Table does Relation is export {</pre>
<p>The Table class is one of the main drivers of TOP. It represents the various backend table classes to the Raku language, so that they can all be accessed via the same API.</p>
<h2 id="Attributes"><a class="u" href="#___top" title="go to top of document">Attributes</a></h2>
<dl>
<dt>$.backend-object</dt>
<dd></dd>

</dl>
<p>Holds the backend object (Table::Driver::Postgres, Table::Driver::Memory, etc) that talks to the table in its backend store; the translation layer between Table and the datastore.</p>
<dl>
<dt>Str $.name</dt>
<dd></dd>

</dl>
<p>The table name.</p>
<h2 id="Methods"><a class="u" href="#___top" title="go to top of document">Methods</a></h2>
<h3 id=".new_Parameters_to_.new_include:"><a class="u" href="#___top" title="go to top of document">.new Parameters to .new include:</a></h3>
<dl>
<dt>Database :$database</dt>
<dd></dd>

</dl>
<p>The database to which this table should be attached.</p>
<dl>
<dt>Str :$backend = &#39;Memory&#39;;</dt>
<dd></dd>

</dl>
<p>The name of the backend to use when creating this table. The default is that it&#39;s an in-memory table.</p>
<dl>
<dt>Str :$action = &#39;use&#39;</dt>
<dd></dd>

</dl>
<p>What kind of action to take when creating the table. See method <code>Database::useTable</code> (below) for more information.</p>
<h1 id="Database"><a class="u" href="#___top" title="go to top of document">Database</a></h1>
<pre class="pod-block-code">class	Database {...}</pre>
<p>This is the Database class from which all other Database classes descend.</p>
<h2 id="Attributes"><a class="u" href="#___top" title="go to top of document">Attributes</a></h2>
<dl>
<dt>$.backend-object</dt>
<dd></dd>

</dl>
<p>The backend object that talks to the data store for us.</p>
<h2 id="Methods"><a class="u" href="#___top" title="go to top of document">Methods</a></h2>
<h3 id=".new()_Parameters_to_.new()_are:"><a class="u" href="#___top" title="go to top of document">.new() Parameters to .new() are:</a></h3>
<dl>
<dt>Str $.backend = &#39;Memory&#39;</dt>
<dd></dd>

</dl>
<p>The backend that will be used by this database. The default is that it&#39;s the in-memory backend.</p>
<h3 id="method_useTable"><a class="u" href="#___top" title="go to top of document">method useTable</a></h3>
<pre class="pod-block-code">method	useTable(Table :$table, Bool :$action, %fields =&gt; {})</pre>
<table class="pod-table">
<thead><tr>
<th>action</th> <th>definition</th> <th>Error if</th> <th>Will alter</th> <th>Fields</th>
</tr></thead>
<tbody>
<tr> <td>create</td> <td>force create</td> <td>Present</td> <td>No</td> <td>Yes</td> </tr> <tr> <td>alter</td> <td>alter existing</td> <td>Absent</td> <td>Yes</td> <td>Yes</td> </tr> <tr> <td>use</td> <td>no creation</td> <td>Absent</td> <td>No</td> <td>No</td> </tr> <tr> <td>can-create</td> <td>create if not existing</td> <td>No</td> <td>No</td> <td>If Absent</td> </tr> <tr> <td>ensure</td> <td>create or alter</td> <td>No</td> <td>Yes</td> <td>If not conformant</td> </tr>
</tbody>
</table>
    </div>

    
</body>
</html>

